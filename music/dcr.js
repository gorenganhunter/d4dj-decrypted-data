const util = require('util');
const exec = util.promisify(require('child_process').exec);
const fs = require("fs")

let ids = {
  '1010001': '1b06e24d34d67ac8',
  '3010029': 'c054cfc97a5cc13d',
  '3010030': '521db4dcc2aa84fd',
  '3010031': '2898fbc6d7a571ff',
  '3010032': '1deb4339b0961fb1',
  '3010033': '2ceae501b33507b4',
  '3010034': '46e91ff3014e07f5',
  '3010035': 'f1895742954806b8',
  '3010036': '189b84400394043d',
  '3010037': '0637e592d471df60',
  '3010038': 'a633022c4198673a',
  '3010039': '8d410b922905a207',
  '3020011': 'c3dba12eeb4cc308',
  '3020021': 'bd9651254d9f6f95',
  '3020027': '4876142f5d34d944',
  '3020029': '0c8c46d327667edc',
  '3020032': '3966399f31d9de81',
  '3020033': 'e9df82eee5800cde',
  '3020034': '9faba30aa051f691',
  '3020037': 'aa06f3d3301a97d2',
  '3020038': '5b6e11b92acc7903',
  '3020039': '044c84f5efae5311',
  '3020040': '49ade60a55212fc5',
  '3020041': 'abd145c0bc3a69dc',
  '3040001': 'd8883291d950e928',
  '5030103': 'a4b16fbd969bf071',
  '5030104': '9b1fdeafe8007f41',
  '5030105': 'ace06e1ff0e92427',
  '5030106': '5b6614302dee85c2',
  '5040024': '2f1a04b23ceef9d4',
  '5050172': '12c07d8b1b9c6e8e',
  '5050173': 'e2b8148cc265cda2',
  '5050174': '5275e4ca06cb46ca',
  '5050175': '851f3b41203ff5ed',
  '5050225': '7b1a2559ece20f11',
  '5050232': '249fb9a25c75632b',
  '5050233': '60cf8b7ef1f1ba8c',
  '5050234': '0e42f74d5567bd5e',
  '5050235': '3e2b8152d40c4111',
  '5050236': '812e320bf455509e',
  '5050237': '55882d342d85c5bf',
  '5050238': '7731e49facd28485',
  '5050239': '2555ab1e06fdb167',
  '5050240': '3890abb5245d6c6f',
  '5050241': '2107ffff2a8fd88a',
  '5050245': '2ade6f09d4c00bdf',
  '5050246': 'a92c33355f232b5a',
  '5050247': 'a0a3629f5d35eef4',
  '5050248': '07e30b53c3bc4efe',
  '5050249': '3fcd37732e64f44a',
  '5050250': '8e42f8b651700386',
  '5050251': '51e07b700d1bc711',
  '5050252': '7271a9fca4d4a183',
  '5050253': '457e9e3b040915bb',
  '5050254': 'fc5419996922fc03',
  '5050255': '6d2e7b90423ac71d',
  '5050256': 'a4b16fbd969bf071',
  '5050257': 'ca4073d3b6fafc65',
  '5050258': '7ce2075bcd63e8ee',
  '5050259': '532d1f45db13c367',
  '5050260': 'b86e633c85e819c4',
  '5050261': '717100eb7bac3d19',
  '5050262': 'dd1041820d825da4',
  '5050263': '11e9578c3c12a4ad',
  '5050264': 'c74ff984f50113d3',
  '5050265': '84d2e4313779511b',
  '5050268': '780e8260c79e77b9',
  '5050269': 'f72c77898bfc4678',
  '5050270': 'be0d5c4c95e909ff',
  '5050271': '1f74bfe24e614687',
  '5050272': '02b24e5c7c7b6e9d',
  '5050273': 'f48f21a99fda09cf',
  '5050274': '5ef1786f364bce23',
  '5050275': '9577c9645a6ffd5e',
  '5050276': 'afc13a64a56884e8',
  '5050277': '76dfb4c3728fe8d9',
  '5050278': '071a776b3ed5ab17',
  '5050284': '880a35323f69b612',
  '0410024': '4b71388640b83c6c',
  '0420019': 'e00590890f7f3219',
  '0320018': 'a9e5ea218873f8db',
  '0510025': '8e779c6c28690617',
  '0410023': 'd5dcbaceb12dd205',
  '0410022': '0198c53b5d345997',
  '0940001': '353e9b0a47ed61bc',
  '0440001': '8f7e24e32cbceb6a',
  '0520021': 'b2b54877e3fa1bc6',
  '0640001': '6cccc0684c8b2664',
  '0340001': 'd8126b12e1ea087d',
  '0610026': 'fdb798f20efbf4ac',
  '0810008': '1f3c1d0817b3d4be',
  '0510024': '0f3bc872fcb7784b',
  '0840001': '9fd373d1412b4d27',
  '0810005': 'd63e9ce2913178a4',
  '0910009': 'faf9830ee551c6c4',
  '0810009': '2e5c9e00274e0f2a',
  '0820004': 'baac3fa8d2d4b6cb',
  '0910008': '6cb33fe1e8506d0f',
  '0920004': '7bd591da4640bd99',
  '0520020': 'bc99855ebbfa8e97',
  '0110035': 'c642361141842f89',
  '0140001': '253fe8e15f9682b6',
  '0210025': '0c59613fc788cec7',
  '0110036': '9eb82f449eb4f3f6',
  '0810006': 'ef287bc5146b1743',
  '0110037': '417822c4c107541c',
  '0120024': '01cc0a87f19dd7ca',
  '0310025': 'b58259c9d1f9ebc1',
  '0210024': 'c60bc5aeec280870',
  '0310023': 'f950f96b2066b16e',
  '0210023': '4c06e4b2e072abaa',
  '0310022': 'a3aad605838eefd7',
  '0910007': 'ef56bb830245a94d',
  '0240001': 'dd4dc0afe201fd53',
  '0210026': 'f61a0cfac4072903',
  '0000011': '5fcc1b142892c55c',
  '0120023': 'e6b3826413d0dbfc',
  '0210022': 'cc7e1e54049f4719',
  '0120025': '480905d4a216f5a6',
  '0310024': '9e3d6943ba67b424',
  '0620020': '7d1d8c5dd43cabfc',
  '0910006': '66cdc54206ac6583'
}

ids = Object.entries(ids)

async function convert(id, key) {
  const { stdout, stderr } = await exec(`CriTool acb2wavs -k 0x${key} music_${id}.acb`)
  if (stderr !== "") console.log(id, stdout);
  else console.log(id, stderr)
  fs.renameSync(`./music_${id}/memory_1.wav`, `./music_${id}.wav`)
}

async function honoka() {
  for (const [id, key] of ids) {
    console.log("Starting " + id + " with " + key)
    try {
        await convert(id, key)
    } catch (err) {
        console.log(`${id} => ${err}`)
    }
  }
}

honoka()
